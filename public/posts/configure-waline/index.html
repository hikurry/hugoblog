<!DOCTYPE html>
<html lang="zh-CN">
    <head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
    <meta charset="UTF-8" />

    <meta name="generator" content="Hugo 0.98.0" /><meta name="theme-color" content="#fff" />
    <meta name="color-scheme" content="light dark">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <meta name="format-detection" content="telephone=no, date=no, address=no, email=no" />
    
    <meta http-equiv="Cache-Control" content="no-transform" />
    
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <title>配置 Waline 评论 | 咖喱</title>

    <link rel="stylesheet" href="/css/meme.min.73c2d3a93dfda8b77f177db875f9a53fa908f854689621aecad4141200c4a773.css"/>

    
    
        <script
  src="/js/meme.min.0dd98f5953bf3e317c8307caad61300c15dcdafd343dea21b2e42ad7f87c02cb.js"></script>

    

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=EB&#43;Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto&#43;Serif&#43;SC:wght@400;500;700&amp;family=Source&#43;Code&#43;Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" media="print" onload="this.media='all'" />
        <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=EB&#43;Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto&#43;Serif&#43;SC:wght@400;500;700&amp;family=Source&#43;Code&#43;Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" /></noscript>

    <meta name="author" content="咖喱" /><meta name="description" content="虽然无人问津但还是要“五脏俱全”，依葫芦画瓢，知其然但不知其所以然，主要是配置了头像和评论TG通知。 头像配置 waline头像使用……" />

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#2a6df4" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="咖喱" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="咖喱" />
    <meta name="msapplication-starturl" content="../../" />
    <meta name="msapplication-TileColor" content="#fff" />
    <meta name="msapplication-TileImage" content="../../icons/mstile-150x150.png" />
    <link rel="manifest" href="/manifest.json" />

    
    

    
    <link rel="canonical" href="https://joysblog.vercel.app/posts/configure-waline/" />
    

<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "datePublished": "2022-06-28T12:35:38+08:00",
        "dateModified": "2024-02-19T22:52:20+08:00",
        "url": "https://joysblog.vercel.app/posts/configure-waline/",
        "headline": "配置 Waline 评论",
        "description": "虽然无人问津但还是要“五脏俱全”，依葫芦画瓢，知其然但不知其所以然，主要是配置了头像和评论TG通知。 头像配置 waline头像使用……",
        "inLanguage" : "zh-CN",
        "articleSection": "posts",
        "wordCount":  425 ,
        "image": ["https://s2.loli.net/2022/06/28/YK7qjVbOcl8sIxh.png","https://s2.loli.net/2022/06/28/RBfEw9egUZXSGNy.png","https://s2.loli.net/2022/06/28/XMOtsASYGcHfkd7.png"],
        "author": {
            "@type": "Person",
            "description": "Learn and Run",
            "email": "reuixiy@gmail.com",
            "image": "https://joysblog.vercel.app/icons/apple-touch-icon.png",
            "url": "https://joysblog.vercel.app/",
            "name": "咖喱"
        },
        "license": "[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)",
        "publisher": {
            "@type": "Organization",
            "name": "咖喱",
            "logo": {
                "@type": "ImageObject",
                "url": "https://joysblog.vercel.app/icons/apple-touch-icon.png"
            },
            "url": "https://joysblog.vercel.app/"
        },
        "mainEntityOfPage": {
            "@type": "WebSite",
            "@id": "https://joysblog.vercel.app/"
        }
    }
</script>

    

<meta name="twitter:card" content="summary_large_image" />



    



<meta property="og:title" content="配置 Waline 评论" />
<meta property="og:description" content="虽然无人问津但还是要“五脏俱全”，依葫芦画瓢，知其然但不知其所以然，主要是配置了头像和评论TG通知。 头像配置 waline头像使用……" />
<meta property="og:url" content="https://joysblog.vercel.app/posts/configure-waline/" />
<meta property="og:site_name" content="咖喱" />
<meta property="og:locale" content="zh" /><meta property="og:image" content="https://s2.loli.net/2022/06/28/YK7qjVbOcl8sIxh.png" />
<meta property="og:type" content="article" />
    <meta property="article:published_time" content="2022-06-28T12:35:38&#43;08:00" />
    <meta property="article:modified_time" content="2024-02-19T22:52:20&#43;08:00" />
    
    <meta property="article:section" content="posts" />



    
    

    
    
    <meta name="referrer" content="no-referrer">

</head>

    <body>
        <div class="container">
            
    <header class="header">
        
            <div class="header-wrapper">
                <div class="header-inner single">
                    
    <div class="site-brand">
        
            <a href="/" class="brand">咖喱</a>
        
    </div>

                    <nav class="nav">
    <ul class="menu" id="menu">
        
            
        
        
        
        
            
                <li class="menu-item"><a href="/archive/"><span class="menu-item-name">归档</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/friends/"><span class="menu-item-name">友链</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/about/"><span class="menu-item-name">关于</span></a>
                </li>
            
        
            
            <li class="menu-item">
                <button
                  id="search-button"
                  class="text-base hover:text-primary-600 dark:hover:text-primary-400"
                  title="Search(/)"
                >
                <span class="icon">
                    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="icon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path></svg>
                
                  </span>
                </button>
              </li>
                
            
        
            
                
                    
                    
                        <li class="menu-item darkmode">
                            <a id="theme-switcher" href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="icon theme-icon-light light"><path d="M384 64C490 64 576 149.1 576 256C576 362 490 448 384 448H192C85.96 448 0 362 0 256C0 149.1 85.96 64 192 64H384zM384 352C437 352 480 309 480 256C480 202.1 437 160 384 160C330.1 160 288 202.1 288 256C288 309 330.1 352 384 352z"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="icon theme-icon-dark dark"><path d="M192 352C138.1 352 96 309 96 256C96 202.1 138.1 160 192 160C245 160 288 202.1 288 256C288 309 245 352 192 352zM384 448H192C85.96 448 0 362 0 256C0 149.1 85.96 64 192 64H384C490 64 576 149.1 576 256C576 362 490 448 384 448zM384 128H192C121.3 128 64 185.3 64 256C64 326.7 121.3 384 192 384H384C454.7 384 512 326.7 512 256C512 185.3 454.7 128 384 128z"/></svg></a>
                        </li>

                    
                
            
        
        
    </ul>
</nav>

                    
                </div>
            </div>
            

        
    </header>




            
            
    <main class="main single" id="main">
    <div class="main-inner">

        

        <article class="content post h-entry" data-align="justify" data-type="posts" data-toc-num="true">

            <h1 class="post-title p-name">配置 Waline 评论</h1>

            

            
                
            

            
                

<div class="post-meta">
    
        
        <time datetime="2022-06-28T12:35:38&#43;08:00" class="post-meta-item published dt-published"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M148 288h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"/></svg>&nbsp;2022.6.28</time>
    
    
    
    
        
        
        
            
                <span class="post-meta-item category"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M464 128H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48zm0 272H48V112h140.12l54.63 54.63c6 6 14.14 9.37 22.63 9.37H464v224z"/></svg>&nbsp;<a href="/categories/learn/" class="category-link p-category">LEARN</a></span>
            
        
    
    
    
    
    
</div>

            

            
    
        <span class="post-tags">
            
                
                
                
                
                    
                    <a href="/tags/%E8%8A%B1%E9%87%8C%E8%83%A1%E5%93%A8/" rel="tag" class="post-tags-link">花里胡哨</a>
                
            
                
                
                
                
                    
                    <a href="/tags/waline/" rel="tag" class="post-tags-link">Waline</a>
                
            
                
                
                
                
                    
                    <a href="/tags/hugo/" rel="tag" class="post-tags-link">Hugo</a>
                
            
        </span>
    


            
            <nav class="contents">
  <details open><summary class="toc"><h2 id="contents" class="contents-title">目录</h2></summary><ol class="toc">
    <li><a id="contents:头像配置" href="#头像配置">头像配置</a></li>
    <li><a id="contents:配置评论通知" href="#配置评论通知">配置评论通知</a></li>
    <li><a id="contents:其他环境变量" href="#其他环境变量">其他环境变量</a></li>
  </ol>
</nav><div class="post-body e-content">
                <p>虽然无人问津但还是要“五脏俱全”，依葫芦画瓢，知其然但不知其所以然，主要是配置了头像和评论TG通知。</p>
<h2 id="头像配置"><a href="#头像配置" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:头像配置" class="headings">头像配置</a></h2>
<p>waline头像使用gravatar，到<a href="http://en.gravatar.com/" target="_blank" rel="noopener">官网</a>注册账号后上传图片即可，注册邮箱需要和评论填写的邮箱一致。</p>
<p>非自定义的头像默认是很丑的蓝色图像，之前的配置中只要修改 <code>avatar</code> 的设置即可，但是我设置成 <code>monsterid</code> 后还是没有改变。找了好久都不知道哪里有问题，而且 Waline 版本更新后出的新的官方文档中删掉了 <code>avatar</code> 这个组建属性，两个官方文档我切换来切换去都搞懵了。 最后在官方 <a href="https://github.com/walinejs/waline/issues/775" target="_blank" rel="noopener">issue</a> 中看到了这条，就索性更新版本后按照评论中的方式设置环境变量试一试。</p>
<p>
  <figure>
    <img src="https://s2.loli.net/2022/06/28/YK7qjVbOcl8sIxh.png" alt="">
    <span class="caption">非自定义头像配置</span>
  </figure>


</p>
<p>更新到最新版本后在 vercel 中配置环境变量：</p>
<p><code>GRAVATAR_STR = https://cravatar.cn/avatar/{{mail|md5}}?d=monsterid </code></p>
<p>然后重新部署，最后测试发现小怪兽头像配置成功了！</p>
<p>
  <img src="https://s2.loli.net/2022/06/28/RBfEw9egUZXSGNy.png" alt="">


</p>
<h2 id="配置评论通知"><a href="#配置评论通知" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:配置评论通知" class="headings">配置评论通知</a></h2>
<p>虽然 Waine 提供了后台，但每次登录查看也还是不方便。于是按照<a href="https://waline.js.org/guide/server/notification.html#telegram-%E9%80%9A%E7%9F%A5" target="_blank" rel="noopener">官方文档</a>配置了评论 TG通知。选择 TG 的原因是我会经常看，同时消息较少不容易被错过。</p>
<p>TG 推送评论通知效果如下：</p>
<p>
  <img src="https://s2.loli.net/2022/06/28/XMOtsASYGcHfkd7.png" alt="">


</p>
<h2 id="其他环境变量"><a href="#其他环境变量" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><a href="#contents:其他环境变量" class="headings">其他环境变量</a></h2>
<p>隐藏评论者的用户代理：</p>
<p><code>DISABLE_USERAGENT = true</code></p>
<p>隐藏评论者的归属地：</p>
<p><code>DISABLE_REGION = true</code></p>

            </div>

            


        </article>

        

        


        


        


        
    
    
        <div class="related-posts">
            <h2 class="related-title">相关文章：<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon related-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"/></svg></h2>
            <ul class="related-list">
                
                    <li class="related-item">
                        <a href="/posts/rough-road-to-customize-my-blog/" class="related-link">坎坷的博客装修之路</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/blog-wordcloud/" class="related-link">博主口癖一览</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/shortcode-test/" class="related-link">短代码测试</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/change-blog-theme-from-stack-to-meme/" class="related-link">博客主题更换：Stack to MemE</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/douban-card/" class="related-link">豆瓣卡片测试</a>
                    </li>
                
            </ul>
        </div>
    



        


        


        
    
        
        
    
    
    
    
        <ul class="post-nav">
            
                <li class="post-nav-prev">
                    <a href="/posts/smile-eye-surgery-record/" rel="prev">&lt; 全飞秒近视手术记录（附半飞秒手术及我的视力矫正史）</a>
                </li>
            
            
                <li class="post-nav-next">
                    <a href="/posts/fear-that-we-are-facing/" rel="next">凭什么我们生来就要遭受这种恐惧 &gt;</a>
                </li>
            
        </ul>
    



        
    

        
            <div class="load-comments">
                <div id="load-comments">加载评论</div>
            </div>
        

        

        

        

        

        
            <div id="waline"></div>
        
    



    </div>
</main>


            
    <div id="back-to-top" class="back-to-top">
        <a href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon arrow-up"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a>
    </div>


            
            
    <footer id="footer" class="footer">
        <div class="footer-inner">
            <div class="site-info">2024&nbsp;咖喱&nbsp&nbsp<a href="/tags">TAG</a>
            </div><div class="powered-by">Powered by <a href="https://github.com/gohugoio/hugo" target="_blank" rel="noopener">Hugo</a> | Theme is <a href="https://github.com/reuixiy/hugo-theme-meme" target="_blank" rel="noopener">MemE</a></div>
            
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
              
            <div class="total-count">本站总计30篇文章，共嘟嘟了59475字</div>

            


            
        </div>
    </footer>


        </div>
        <div id="search-wrapper" data-url="/">
  <div id="search-modal">
    <header class="search-header">
      <form class="search-form">
        <div class="search-icon">
          <span class="icon">
            <svg
              aria-hidden="true"
              focusable="false"
              data-prefix="fas"
              data-icon="search"
              role="img"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 512 512"
            >
              <path
                fill="currentColor"
                d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"
              ></path>
            </svg>
          </span>
        </div>
        <input
          type="search"
          id="search-query"
          placeholder="Search"
          tabindex="0"
        />
      </form>
      <button id="close-search-button" title="Close(Esc)" class="search-icon">
        <span class="icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
            <path
              fill="currentColor"
              d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"
            ></path>
          </svg>
        </span>
      </button>
    </header>
    <section class="search-section">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>
<script src="https://unpkg.com/fuse.js@6.6.2"></script>
<script>
  var fuse;
  var showButton = document.getElementById("search-button");
  var hideButton = document.getElementById("close-search-button");
  var wrapper = document.getElementById("search-wrapper");
  var modal = document.getElementById("search-modal");
  var input = document.getElementById("search-query");
  var output = document.getElementById("search-results");
  var first = output.firstChild;
  var last = output.lastChild;
  var searchVisible = false;
  var indexed = false;
  var hasResults = false;

  
  showButton.addEventListener("click", displaySearch);
  hideButton.addEventListener("click", hideSearch);
  wrapper.addEventListener("click", hideSearch);
  modal.addEventListener("click", function (event) {
    event.stopPropagation();
    event.stopImmediatePropagation();
    return false;
  });
  document.addEventListener("keydown", function (event) {
    
    if (event.key == "/") {
      if (!searchVisible) {
        event.preventDefault();
        displaySearch();
      }
    }

    
    if (event.key == "Escape") {
      hideSearch();
    }

    
    if (event.key == "ArrowDown") {
      if (searchVisible && hasResults) {
        event.preventDefault();
        if (document.activeElement == input) {
          first.focus();
        } else if (document.activeElement == last) {
          last.focus();
        } else {
          document.activeElement.parentElement.nextSibling.firstElementChild.focus();
        }
      }
    }

    
    if (event.key == "ArrowUp") {
      if (searchVisible && hasResults) {
        event.preventDefault();
        if (document.activeElement == input) {
          input.focus();
        } else if (document.activeElement == first) {
          input.focus();
        } else {
          document.activeElement.parentElement.previousSibling.firstElementChild.focus();
        }
      }
    }
  });

  

  input.addEventListener("input", (event) => {
    term = event.target.value.trim().replace("!", "");
    executeQuery(term);
  });

  function displaySearch() {
    if (!indexed) {
      buildIndex();
    }
    if (!searchVisible) {
      document.body.style.overflow = "hidden";
      wrapper.style.visibility = "visible";
      input.focus();
      searchVisible = true;
    }
  }

  function hideSearch() {
    if (searchVisible) {
      document.body.style.overflow = "visible";
      wrapper.style.visibility = "hidden";
      input.value = "";
      output.innerHTML = "";
      document.activeElement.blur();
      searchVisible = false;
    }
  }

  function fetchJSON(path, callback) {
    var httpRequest = new XMLHttpRequest();
    httpRequest.onreadystatechange = function () {
      if (httpRequest.readyState === 4) {
        if (httpRequest.status === 200) {
          var data = JSON.parse(httpRequest.responseText);
          if (callback) callback(data);
        }
      }
    };
    httpRequest.open("GET", path);
    httpRequest.send();
  }

  function buildIndex() {
    var baseURL = wrapper.getAttribute("data-url");
    baseURL = baseURL.replace(/\/?$/, "/");
    fetchJSON(baseURL + "index.json", function (data) {
      var options = {
        shouldSort: true,
        ignoreLocation: true,
        threshold: 0.0,
        includeMatches: true,
        keys: [
          { name: "title", weight: 0.8 },
          { name: "categories", weight: 0.2 },
          { name: "tags", weight: 0.2 },
          { name: "content", weight: 0.4 },
        ],
      };
      fuse = new Fuse(data, options);
      indexed = true;
    });
  }

  function executeQuery(term) {
    let results = fuse.search(term);
    let resultsHTML = "";

    if (results.length > 0) {
      results.forEach(function (value, key) {
        resultsHTML =
          resultsHTML +
          `<li class="search-item">
          <a href="${value.item.permalink}" tabindex="0">
            <div class="search-item-content">
              <div class="search-item-title">${value.item.title}</div>
              <div class="search-item-categories">${value.item.categories}<span class="search-item-tags">&middot;</span>${value.item.tags}<span class="search-item-date">&middot;</span>${value.item.date}</span></div>

            </div>
            <div class="search-item-link">&rarr;</div>
          </a>
        </li>`;
      });
      hasResults = true;
    } else {
      resultsHTML = "";
      hasResults = false;
    }

    output.innerHTML = resultsHTML;
    if (results.length > 0) {
      first = output.firstChild.firstElementChild;
      last = output.lastChild.firstElementChild;
    }
  }
</script>

        

        






    

        

        

        

        

        
            <link
  rel="stylesheet"
  href="https://unpkg.com/@waline/client@2.6.1/dist/waline.css"
/>
<script>
  function loadComments() {
      if (typeof Waline === 'undefined') {
          var getScript = (options) => {
              var script = document.createElement('script');
              script.defer = true;
              script.crossOrigin = 'anonymous';
              Object.keys(options).forEach((key) => {
                  script[key] = options[key];
              });
              document.body.appendChild(script);
          };
          getScript({
              src: 'https://unpkg.com/@waline/client@2.6.1/dist/waline.js',
              onload: () => {
                  newWaline();
              }
          });
      } else {
          newWaline();
      }
  }
  function newWaline() {
      const locale = {
          nick: "昵称",
          mail: "邮箱",
          placeholder: "请填写正确的昵称和邮箱，方便接收评论回复信息。"
      };
      Waline.init({
          el: '#waline',
          dark: 'html[data-theme="dark"]',
          serverURL: 'https:\/\/waline-weld.vercel.app\/',
          wordLimit:  0 ,
          meta: ["nick","mail","link"],
          pageSize:  10 ,
          lang: 'zh-CN',
          highlighter:  true ,
          emoji:  null ,
          requiredMeta: ["nick","mail"],
          login: 'enabled',
          copyright:  true ,
          locale
      });
  }
</script>

<style>
  :root {
    --waline-theme-color: var(--color-primary);
    --waline-active-color: var(--color-primary);
  }
</style>

        
        
    



    <script src="//tokinx.github.io/ViewImage/view-image.min.js"></script>
<script>
  window.ViewImage &&
    ViewImage.init(".post img:not(.post-preview img, .avatar, .frienddiv img)");
</script>




    <script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module" defer></script>







<script>
    (function(u, c) {
      var d = document, t = 'script', o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function(e) { c(e); }); }
      s.parentNode.insertBefore(o, s);
    })('//cdn.bootcss.com/pangu/3.3.0/pangu.min.js', function() {
      pangu.spacingPage();
    });
    </script>
    


    </body>
</html>
