
{{ $dbUrl := .Get 0 }}
{{ $dbUrl := replace $dbUrl "https://neodb.social/" "https://neodb.social/api/" }}
{{ $db := getJSON $dbUrl }}
{{ $dbType := $db.category }}
<!--电影-->
{{if eq $dbType "movie" }}
<div class="post-preview game movie">
  <img
    referrer-policy="no-referrer"
    loading="lazy"
    class="post-preview--image"
    src="{{ $db.cover_image_url }}"
  />
  <div class="post-preview--meta">
    <div class="post-preview--middle">
      <h4 class="post-preview--title">
        <a target="_blank" href="{{ .Get 0 }}">{{ $db.title }}</a>
      </h4>
      <div class="rating">
        <div class="rating-star allstar{{ $db.rating }}"></div>
        <div class="rating-average">{{ $db.rating }}</div>
        <div class="release-time"></div>
      </div>
      <span class="post-preview--date">
        {{ $db.year }} / {{ range $genre := $db.genre }}{{ $genre }} {{ end }} /
        {{ range $area := $db.area }}{{ $area }} {{ end }} / {{ index
        $db.director 0 }} / {{ index $db.actor 0 }} / {{ index $db.actor 1}}
        </span>
      <section
        style="max-height: 75px; overflow: hidden"
        class="post-preview--excerpt"
      >
        {{ $db.brief | plainify }}
      </section>
    </div>
  </div>
</div>
{{end}}

<!--书籍-->
{{if eq $dbType "book" }}
<div class="post-preview game movie">
  <img
    referrer-policy="no-referrer"
    loading="lazy"
    class="post-preview--image"
    src="{{ $db.cover_image_url }}"
  />
  <div class="post-preview--meta">
    <div class="post-preview--middle">
      <h4 class="post-preview--title">
        <a target="_blank" href="{{ .Get 0 }}">{{ $db.title }}</a>
      </h4>
      <div class="rating">
        <div class="rating-star allstar{{ $db.rating }}"></div>
        <div class="rating-average">{{ $db.rating }}</div>
        <div class="release-time"></div>
      </div>
      <span class="post-preview--date">
        {{ $db.pub_year }} / {{ range $author := $db.author }}{{ $author}}
        {{end}}
      </span>
      <section
        style="max-height: 75px; overflow: hidden"
        class="post-preview--excerpt"
      >
        {{ $db.brief | plainify }}
      </section>
    </div>
  </div>
</div>
{{end}}
<!--tv-->
{{if eq $dbType "tv" }}
<div class="post-preview game movie">
  <img
    referrer-policy="no-referrer"
    loading="lazy"
    class="post-preview--image"
    src="{{ $db.cover_image_url }}"
  />
  <div class="post-preview--meta">
    <div class="post-preview--middle">
      <h4 class="post-preview--title">
        <a target="_blank" href="{{ .Get 0 }}">{{ $db.title }}</a>
      </h4>
      <div class="rating">
        <div class="rating-star allstar{{ $db.rating }}"></div>
        <div class="rating-average">{{ $db.rating }}</div>
        <div class="release-time"></div>
      </div>
      <span class="post-preview--date">
        {{ $db.year }} / {{ range $genre := $db.genre }}{{ $genre }} {{ end }} /
        {{ range $area := $db.area }}{{ $area }} {{ end }} / {{ index
        $db.director 0 }} / {{ index $db.actor 0 }} / {{ index $db.actor 1}}
      </span>
      <section
        style="max-height: 75px; overflow: hidden"
        class="post-preview--excerpt"
      >
        {{ $db.brief | plainify }}
      </section>
    </div>
  </div>
</div>
{{end}}

<!--tv-->
{{if eq $dbType "tv/season" }}
<div class="post-preview game movie">
  <img
    referrer-policy="no-referrer"
    loading="lazy"
    class="post-preview--image"
    src="{{ $db.cover_image_url }}"
  />
  <div class="post-preview--meta">
    <div class="post-preview--middle">
      <h4 class="post-preview--title">
        <a target="_blank" href="{{ .Get 0 }}">{{ $db.title }}</a>
      </h4>
      <div class="rating">
        <div class="rating-star allstar{{ $db.rating }}"></div>
        <div class="rating-average">{{ $db.rating }}</div>
        <div class="release-time"></div>
      </div>
      <span class="post-preview--date">
        {{ $db.year }} / {{ range $genre := $db.genre }}{{ $genre }} {{ end }} /
        {{ range $area := $db.area }}{{ $area }} {{ end }} / {{ index
        $db.director 0 }} / {{ index $db.actor 0 }} / {{ index $db.actor 1}}
      </span>
      <section
        style="max-height: 75px; overflow: hidden"
        class="post-preview--excerpt"
      >
        {{ $db.brief | plainify }}
      </section>
    </div>
  </div>
</div>
{{end}}

<!--podcast-->
{{if eq $dbType "podcast" }}
<div class="post-preview game movie">
  <img
    referrer-policy="no-referrer"
    loading="lazy"
    class="post-preview--image"
    src="{{ $db.cover_image_url }}"
  />
  <div class="post-preview--meta">
    <div class="post-preview--middle">
      <h4 class="post-preview--title">
        <a target="_blank" href="{{ .Get 0 }}">{{ $db.title }}</a>
      </h4>
      <div class="rating">
        <div class="rating-star allstar{{ $db.rating }}"></div>
        <div class="rating-average">{{ $db.rating }}</div>
        <div class="release-time"></div>
      </div>
      <span class="post-preview--date">
        {{ range $genre := $db.genre }}{{ $genre }} {{ end }} / {{ range $hosts
        := $db.hosts }}{{ $hosts }} {{ end }}
        </span>
      <section
        style="max-height: 75px; overflow: hidden"
        class="post-preview--excerpt"
      >
        {{ $db.brief | plainify }}
      </section>
    </div>
  </div>
</div>
{{end}}

<!--game-->
{{if eq $dbType "game" }}
<div class="post-preview game movie">
  <img
    referrer-policy="no-referrer"
    loading="lazy"
    class="post-preview--image"
    src="{{ $db.cover_image_url }}"
  />
  <div class="post-preview--meta">
    <div class="post-preview--middle">
      <h4 class="post-preview--title">
        <a target="_blank" href="{{ .Get 0 }}">{{ $db.title }}</a>
      </h4>
      <div class="rating">
        <div class="rating-star allstar{{ $db.rating }}"></div>
        <div class="rating-average">{{ $db.rating }}</div>
        <div class="release-time"></div>
      </div>
      <time class="post-preview--date">
        {{ $db.release_date }} / {{ range $genre := $db.genre }}{{ $genre }} {{
        end }} / {{ range $developer := $db.developer }}{{ $developer }} {{ end
        }}
        <span class="post-preview--tags">
          {{ range $tags := $db.tags }}
          <span class="post-preview--tag">{{ $tags.name }}</span>
          {{ end }}
        </span>
      </time>
      <section
        style="max-height: 75px; overflow: hidden"
        class="post-preview--excerpt"
      >
        {{ $db.brief | plainify }}
      </section>
    </div>
  </div>
</div>
{{end}}

<!--album-->
{{if eq $dbType "album" }}
  <div class="post-preview game movie">
    <img
      referrer-policy="no-referrer"
      loading="lazy"
      class="post-preview--image"
      src="{{ $db.cover_image_url }}"
    />
    <div class="post-preview--meta">
      <div class="post-preview--middle">
        <h4 class="post-preview--title">
          <a target="_blank" href="{{ .Get 0 }}">{{ $db.title }}</a>
        </h4>
        <div class="rating">
          <div class="rating-star allstar{{ $db.rating }}"></div>
          <div class="rating-average">{{ $db.rating }}</div>
          <div class="release-time"></div>
        </div>
        <span class="post-preview--date">
          {{ range $artist := $db.artist }}{{ $artist }} {{ end }} / {{ range $genre := $db.genre }}{{ $genre }} {{ end }}
          </span>
        <section
          style="max-height: 75px; overflow: hidden"
          class="post-preview--excerpt"
        >
          {{ $db.brief | plainify }}
        </section>
      </div>
    </div>
  </div>
  {{end}}

<style>
  .post-preview {
    max-width: 780px;
    height: 180px;
    margin: 1em auto;
    position: relative;
    display: flex;
    background: hsla(
      var(--color-contrast-lower-h),
      var(--color-contrast-lower-s),
      var(--color-contrast-lower-l),
      0.5
    );
    border-radius: 10px;
  }
  .post-preview-wrapper {
    display: flex;
    margin: 12px 16px;
    width: 75%;
  }
  .post-preview--meta {
    overflow: hidden;
    margin: 8px 15px;
  }
  .post-preview--middle {
    line-height: 28px;
  }
  .post-preview--title {
    font-size: 16px;
    margin: 0 !important;
  }
  .post-preview--title a {
    text-decoration: none;
  }
  .post-preview--date {
    font-size: 12px;
    color: #999;
  }
  .post-preview--excerpt {
    font-size: 13px;
    line-height: 1.825;
  }
  .post-preview--excerpt p {
    display: inline;
    margin: 0;
    line-height: 1.825;
  }
  .post-preview--image {
    height: 160px !important;
    width: auto;
    float: right;
    border: none !important;
    margin: 10px 0px 10px 10px !important;
  }
  @media (max-width: 550px) {
    .post-preview {
      width: 95%;
      height: 120px;
    }
    .post-preview--middle {
      line-height: 19px;
    }
    .post-preview--excerpt {
      display: none;
    }
    .post-preview--middle {
      line-height: 19px;
    }
    .post-preview--image {
      height: 104px !important;
      margin: 8px 0 8px 8px!important;
    }
  }
  .rating {
    display: flex;
    line-height: 15px;
    margin: 5px 0;
  }
  .rating-star {
    display: inline-block;
    width: 75px;
    height: 15px;
    background-repeat: no-repeat;
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAAClCAYAAAAUAAAYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA5xJREFUeNrs3T9rFEEcxvG7qEQIglaCICKkin9AUEtBKxU7wS61VlYivgWj70TtNFj5BqzE7qxEWwsxKIoYn4UtluFmbm8nczvzm+/BjxyuDwNzu3uXD0+46f7LC5PA45Hm+WTYw1x2LRDc0jzTXB+wqMlsaLPutz8fDFjYZHYauAz3NBvt83XNnyUWNpn1nVm3OsHmsb3EomazzZnVXKMPNcc0xzUnNKc0Rzv/77fms+Z7O3vt9b1eU7bZrNN68l5zcolX4ofmsuZXTdnmMvyi2dR86Bmcac62P6vKrnVubpc0bxYE32nOab45N8YqsvPeDfcD4SOav4HjprPuu+H5BTt9LXDMfNbdLPfT678Fx6vKupt1o/O8+R3pkOaJ5/iktqx7z/qp+aq5q/nY+fczmheaK03Gs7D5rLtZdzSvA6/Ebc2u55j57HQB0TzW7AzkjiKzny6+2hlKNE8juMNcFqKBaIZndRlCNBBNgmx7ZkE0fbLtZkE0EA1EM17WuQwhGogGooFoss6296y52cNO+J6HLJoPaFdbsvA9zGerIxrPh85eWYgGooFoDiQbuAxp0UA0EVmdWbRo+ma1WbRoIBqIZtzsnHdDWjQQDUQD0WSbde5ZS2UhmtqJJtSEiVkXooFoIJre2VATJmZdiKZ2ogk1YSb8oVMvDeUPnSAaiCaPJkzMuhANRAPRQDQpsqEmTMy6EI11oolpwkA0EA1EcyDZmCYMRAPR+LMxTZjqiCamCQPRQDQQzehNGIgGooFoIJpVZ2OaMBBN7USTqgkD0UA0EE3vbKomDERTO9GkasKYJJpUTRiIBqKBaEZvwkA0EA1EA9GkyKZqwkA01olmrCYMRAPRQDR9LkO+0QmiKbAJUyTRjNWEgWggGohm9CYMRAPRQDQQzZDsWE0YiMYC0eTYhIFoIJrKiCbHJgxEY4FocmzCZEs0OTZhIBqIpjKiybEJA9FANBANROPL5tiEgWhKIJoSmzAQDURjjGhKbMJANCUQTYlNmNGIpsQmDEQD0RgjmhKbMBANRAPR1Es0JTZhIJpciMZaEwaigWgKJBprTRiIJheisdaESUo01powEA1EUyDRWGvCQDQQDURjm2isNWEgmlURzWw2q4pZIBqIJkOiCVyGJpkFolkV0ejMMvel28mIRptl7ku3IRqIpjCimfNuaJpZIBqIBqIpm2ice5Z5ZonJupvVkMRu4JW4qXnrOWY++1+AAQBw9BJSCTeN9wAAAABJRU5ErkJggg==);
    overflow: hidden;
  }
  .allstar10 {
    background-position: 0px 0px;
  }
  .allstar9 {
    background-position: 0px -15px;
  }
  .allstar8 {
    background-position: 0px -30px;
  }
  .allstar7 {
    background-position: 0px -45px;
  }
  .allstar6 {
    background-position: 0px -60px;
  }
  .allstar5 {
    background-position: 0px -75px;
  }
  .allstar4 {
    background-position: 0px -90px;
  }
  .allstar3 {
    background-position: 0px -105px;
  }
  .allstar2 {
    background-position: 0px -120px;
  }
  .allstar1 {
    background-position: 0px -135px;
  }
  .allstar0 {
    background-position: 0px -150px;
  }
  .rating-average {
    color: #777;
    display: inline-block;
    font-size: 13px;
    margin-left: 10px;
  }
</style>
